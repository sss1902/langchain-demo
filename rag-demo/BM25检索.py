LONG_DOCUMENT = """
医疗器械主文档资料（DMR）是包含医疗器械成品的完整生产过程控制文件，用于确保产品的质量稳定和可追溯性。以下是详细内容：



产品概述与规格
产品描述文档
产品名称、型号、版本信息。
产品的用途、适用范围（包括适用的医疗场景、患者群体等）。
产品的整体结构和组成部分，详细描述主机、拍照手柄等部件的外观、尺寸、连接方式等物理特性。


产品规格书
技术规格：包括舌诊、面诊、穴位识别、问诊功能的具体技术参数。例如，舌面图像采集的分辨率、色彩深度；诊断算法的准确性指标；数据处理和传输的速度等。
性能规格：产品在不同工作环境下（如温度、湿度范围）应满足的性能要求，如设备的启动时间、连续工作时长、不同功能模块之间的切换响应时间等。




生产工艺流程与质量控制
生产工艺流程图
从原材料采购到成品入库的整个生产流程，以图形方式清晰展示各个步骤，包括零部件加工、组装、调试、检验等环节，标注各环节的关键控制点。


生产工艺文件
针对每个生产步骤的详细操作说明，如零部件加工的工艺参数（切割速度、焊接温度等）、组装的顺序和方法、调试的步骤和标准等。
特殊过程（如焊接、灭菌等）的确认文件，包括过程能力分析、操作人员资质要求、设备和环境条件控制等内容。


质量控制计划
进货检验：原材料和零部件的检验标准、抽样方法、检验项目（如材料的物理性能、电气元件的参数等）和验收准则。
过程检验：在生产过程中各个关键控制点的检验方法和标准，例如半成品的外观检查、性能测试等，以及不合格品的控制措施。
成品检验：成品的最终检验项目（包括功能测试、安全测试等）、检验方法（如使用标准测试设备、模拟实际使用场景等）、合格判定标准和检验记录要求。




原材料与零部件信息
原材料清单
列出所有用于生产产品的原材料，包括名称、规格、型号、供应商信息等。
原材料的质量标准和验收要求，如材料的纯度、物理化学性质、生物相容性等指标的要求。


零部件清单与图纸
详细的零部件清单，包括名称、规格、型号、功能描述、使用数量等。
每个零部件的设计图纸和技术规格，便于在生产过程中进行质量控制和追溯。


供应商评估与管理文件
供应商的选择标准和评估记录，包括对供应商的质量体系审核、样品测试、供货能力评估等内容。
与供应商签订的质量协议，明确原材料和零部件的质量责任、技术要求、变更通知等条款。




设备与设施要求
生产设备清单与维护计划
用于生产产品的所有设备（如加工机床、检测仪器等）的清单，包括设备名称、型号、生产厂家、购买日期等信息。
设备的操作规程，详细说明设备的启动、运行、停止步骤和注意事项。
设备的定期维护计划和维护记录，包括维护的项目、周期、方法、维修记录等，确保设备的正常运行。


生产环境控制文件
生产车间的环境要求，如洁净度级别、温度、湿度、通风条件等，以及环境监测计划和记录。
对特殊生产环境（如无菌生产区域）的建设、维护和监控文件，包括净化系统的运行和维护、人员和物料的进出控制等。




包装与标识文件
包装设计文件
产品包装的结构设计图纸，包括内包装、外包装的形状、尺寸和材质选择。
包装材料的质量标准和验收要求，如包装材料的强度、防潮性、透气性等性能指标。


包装操作文件
包装的操作流程，包括产品的放置方式、防护措施（如缓冲材料的使用）、密封要求等。
包装标识的内容和要求，如产品名称、型号、规格、生产日期、有效期、注册证号、使用说明、警示信息等，以及标识的制作方法和粘贴位置。




软件相关文件（如适用）
软件需求规格说明书
软件功能需求，如舌面诊断仪器软件的图像采集控制、诊断算法实现、数据存储和查询功能等。
软件性能需求，包括软件的响应时间、数据处理速度、兼容性要求等。


软件设计文档
软件架构设计，包括软件的模块划分、模块之间的接口关系等。
软件详细设计，如算法流程、数据结构设计、代码编写规范等。


软件测试文件
软件测试计划，包括测试的类型（单元测试、集成测试、系统测试）、测试用例设计、测试环境搭建等。
软件测试报告，记录测试结果，包括功能测试、性能测试、安全性测试等方面的发现的问题和解决情况。




售后服务与技术支持文件
产品安装与操作手册
产品的安装步骤和要求，包括主机和拍照手柄的安装、连接外部设备（如显示器、打印机）的方法等。
产品的操作指南，详细说明舌诊、面诊、穴位识别、问诊等功能的操作流程，以及操作界面的各个按钮、菜单的功能和使用方法。


产品维护与维修手册
产品的日常维护方法，如清洁、校准、保养的周期和步骤。
常见故障的诊断和排除方法，包括故障现象、可能的原因、维修步骤和所需的工具、备件等。


技术支持与客户服务文件
售后服务的联系方式（如电话、邮箱、在线客服等）和服务时间。
客户投诉处理流程和记录，包括投诉的接收、调查、处理结果反馈等环节。

"""
# pip install rank_bm25
from rank_bm25 import BM25Okapi
# 1.将文档拆成句子
documents = [s.strip() for s in LONG_DOCUMENT.split('。') if s.strip()]
print(documents)

# 2. 分词
tokenized_corpus = [doc.split() for doc in documents]

# 3.初始化BM25模型
bm25 = BM25Okapi(tokenized_corpus)

# 4.查询
query = '售后服务与技术支持文件'
tokenized_query = query.split()

# 5. 计算分数并排序
scores = bm25.get_scores(tokenized_query)
top_k = 3
ranked_docs = sorted(zip(documents,scores), key=lambda x: x[1], reverse=True)[:top_k]

# 6.输出结果
for i, (doc,score) in enumerate(ranked_docs):
    print(f'Rank{i+1} | Score:{score}')
    print(doc)
    print('_'*49)




















